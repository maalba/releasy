<div class="container artists-find" data-controller="filter">

  <%= link_to 'Sign in with Spotify', '/auth/spotify' %>


  <div class="search my-5">
    <%= render "components/search", placeholder_text: "Search for an artist..." %>
  </div>

  <%= link_to 'Sign in with Spotify', '/auth/spotify/callback' %>

  <% if @query %>
    <h2>Search results for <%= @query %>:</h2>
    <%= link_to "Back to Browse", artists_path %>
  <% end %>

  <%# <% unless current_user.all_favorited.empty? || @query %> 

  <div class="artist-cards row">
    <% @artists.each do |artist| %>
      <div class="col-sm">
        <%= render 'components/artist_card', artist: artist, user: current_user %>
      </div>
    <% end %>
  <% if @query %>
    <% @spotify_artists.each do |artist| %>
      <% id = artist.spotify_id %>
      <% unless Artist.search_by_id(id).first %>
        <div class="col-sm">
          <%= render "components/spotify_artist_card", artist: artist, user: current_user %>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>
  </div>

